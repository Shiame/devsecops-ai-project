name: backend CI pipeline
on:
    push:
        branches: ["main"]
jobs:
    build:
        runs-on: ubuntu-latest
        services:
          mysql:
            image: mysql:8.2.0
            env:
              MYSQL_ROOT_PASSWORD: password
            ports:
              - 3306:3306
            options: -health-cmd="mysqladmin ping" --health-interval=10s --health-timeout=5s --health-retries=3

        steps:
          - name: Checkout code
            uses: actions/checkout@v4
          - name: Set up JDK 17
            uses: actions/setup-java@v4
            with:
              distribution: 'temurin'
              java-version: '17'
              cache: 'maven'
          - name: Build with maven
            run: mvn -B clean package --file spring-boot-data-jpa-mysql/pom.xml
          - name: Upload backend artifacts
            uses: actions/upload-artifact@v4
            with:
              name: backend-jar
              path: spring-boot-data-jpa-mysql/target/*.jar





